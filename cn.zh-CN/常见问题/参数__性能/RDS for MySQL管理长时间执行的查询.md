# RDS for MySQL管理长时间执行的查询 {#concept_mvj_1y2_jhb .concept}

## 出现原因 {#section_zdf_dy2_jhb .section}

在使用RDS for MySQL的过程中，由于某些原因，例如被SQL注入、SQL执行效率较差、DDL语句引起表元数据锁等待等等，会出现运行时间很长的查询。

-   由于SQL执行效率差而导致的长时间查询。
-   由于被SQL注入而导致的长时间查询。
-   由于DDL语句引起表元数据锁等待。

    **说明：** 元数据锁等待的问题请参见[解决MDL锁导致无法操作数据库的问题](../../../../../cn.zh-CN/最佳实践/MySQL/解决MDL锁导致无法操作数据库的问题.md#)。


## 长时间执行的查询带来的问题 {#section_upz_4z2_jhb .section}

通常来说，除非是BI/报表类查询，否则长时间执行的查询对于应用缺乏意义，而且会消耗系统资源，比如大量长时间查询可能会引起CPU、IOPS和连接数过高等问题，导致系统不稳定。

## 如何避免长时间执行的查询 {#section_rdy_4mf_jhb .section}

-   应用方面应注意增加防止SQL注入的保护措施。
-   在新功能模块上线前，进行压力测试，避免执行效率很差的SQL大量执行。
-   尽量在业务低峰期进行索引创建删除、表结构修改、表维护和表删除操作。

## 如何处理长时间执行的查询 {#section_am3_dnf_jhb .section}

请参见[解决MDL锁导致无法操作数据库的问题](../../../../../cn.zh-CN/最佳实践/MySQL/解决MDL锁导致无法操作数据库的问题.md#)。

