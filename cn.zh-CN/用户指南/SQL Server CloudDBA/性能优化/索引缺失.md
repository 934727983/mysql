# 索引缺失 {#concept_mml_ynk_xfb .concept}

阿里的专家服务团队总结多年服务经验，发现许多客户遇到RDS CPU使用率过高、IOPS过高、查询语句性能低下、应用超时卡顿等问题，超过90%的原因是索引缺失导致的。

SQL Server CloudDBA提供索引缺失查询功能，用户可以非常方便地发现RDS实例中缺失的索引信息，导出创建缺失索引的脚本文件，然后在业务低峰期自行创建这些缺失的索引，以解决前面提到的性能问题。

**说明：** 目前仅SQL Server实例支持此功能。

## 操作步骤 {#section_zj3_yxk_xfb .section}

1.  登录[RDS管理控制台](https://rds.console.aliyun.com/)。
2.  在页面左上角，选择实例所在地域。

    ![地域截图](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7882/154745992637169_zh-CN.png)

3.  找到目标实例，单击实例ID。
4.  在左侧导航栏中，选择**CloudDBA** \> **性能优化**。
5.  选择索引缺失页签，在**索引缺失详情**框中勾选相应的过滤条件，单击**导出脚本**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/64923/154745992632893_zh-CN.png)

6.  在业务低峰期，您使用脚本内的创建语句在实例上执行即可。

## 页面介绍 {#section_srt_1ml_xfb .section}

-   索引缺失总览：展示RDS实例缺失索引的概况。详细参数说明如下。

    |参数|说明|
    |--|--|
    |索引缺失总量|实例下所有表的缺失索引总数量，以及其中可提升性能超过80%的索引数量。|
    |近一天访问|实例下所有表的缺失索引最近一天的访问条数及在索引缺失总量所占比例。|
    |近一周访问|实例下所有表的缺失索引最近一周的访问条数及在索引缺失总量所占比例。|
    |近一月访问|实例下所有表的缺失索引最近一月的访问条数及在索引缺失总量所占比例。|
    |数据更新时间|RDS实例索引缺失页面数据的产生时间。|
    |重新采集|如果您觉得**数据更新时间**过久，您也可以单击**重新采集**按钮并确认，让系统后台异步重新采集数据。 **说明：** 后台异步重新采集数据，您需要等待几分钟后刷新页面查看结果。

|
    |保存PDF|如果您需要将页面保存到本地，请单击**保存PDF**，等待PDF文件生成。|

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/64923/154745992632891_zh-CN.png)

-   索引缺失图表信息：以图表形式直观展示RDS实例索引缺失的趋势，形象表达索引缺失对性能的提升和资源消耗的减少。详细参数说明如下。

    |参数|说明|
    |--|--|
    |索引缺失变化趋势|最近24小时之内的缺失索引量变化趋势。|
    |用户最后查找时间|最近一天、最近一周、最近两周、最近一月的用户查找缺失索引总量。|
    |查询开销平均减少|缺失索引造成的查询平均开销减少的统计情况。|
    |查询性能提升|缺失索引造成的性能提升的统计情况。|

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/64923/154745992732892_zh-CN.png)

-   索引缺失详情：以表格形式展示用户当前实例所有缺失索引详细信息。详细参数说明如下。

    |参数|说明|
    |--|--|
    |表名称|由三个部分组成：    -   数据库名
    -   架构名
    -   对象名
|
    |总空间|索引缺失表总的空间大小。|
    |记录数|索引缺失表总记录条数。|
    |总页数|索引缺失表空间总页数。|
    |索引个数|索引缺失表目前所拥有的索引个数。|
    |相等列|缺失索引被使用来做等于查询的列。|
    |不等列|缺失索引被使用来做不等于查询的列。|
    |包含列|缺失索引包含列。|
    |用户查找次数|索引缺失被查找的次数。|
    |用户扫描次数|索引缺失表被扫描的次数。|
    |用户平均开销节约|预测建立了缺失索引后，用户的平均开销节约。|
    |用户性能提升%|预测建立了缺失索引后，用户的平均查询性能提升百分比。|
    |用户最后查找时间|缺失索引用户最后的查找时间点。|
    |索引创建语句|创建缺失索引的语句，用户可以使用这个语句来创建缺失索引。|
    |导出脚本|导出缺失索引的创建语句，选择合适的时间在对应的RDS实例上执行即可。|
    |导出文件|将缺失索引详情导出为excel、CSV或者txt文件。|

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/64923/154745992732951_zh-CN.png)


