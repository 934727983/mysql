# TOP Objects

SQL Server CloudDBA提供TOP Objects查询功能，展示RDS用户实例中对象级别（存储过程、函数、触发器等）的性能问题。

## 操作步骤

1.  登录[RDS管理控制台](https://rds.console.aliyun.com/)。
2.  在页面左上角，选择实例所在地域。

    ![选择地域](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/3074469951/p36543.png)

3.  找到目标实例，单击实例ID。
4.  在左侧导航栏中，选择**CloudDBA** \> **性能优化**。
5.  选择TOP Objects页签。
6.  在页面右侧选择**数据库名称**、**刷新间隔**、**排序方式**、**显示条数**并打开**自动刷新**右侧的开关即可。

    ![](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/0213729951/p34730.png)


## 页面介绍

-   TOP Objects总览：查看整个页面数据的最后更新时间和对整个页面数据进行控制。详细参数说明如下。

    |参数|说明|
    |--|--|
    |**DB过滤**|选择想要查看的数据库，支持多选，可以同时查看多个数据库。|
    |**自动刷新的时间间隔**|如果打开自动刷新，页面自动刷新的时间间隔有四个值可选，分别是5、10、30和60秒。|
    |**用户TOP Objects对象性能消耗排序方式**|实例的实时TOP Objects排序，可以根据平均CPU开销、平均执行耗时、总CPU开销、总逻辑读、总物理读等方式进行排序。|
    |**显示条数**|用户需要查看的对象TOP数，有三个值供选择，分别是5、10和15条。|
    |**自动刷新**|设置自动刷新页面实时TOP Objects信息。|
    |**数据更新时间**|RDS实例统计信息页面数据的产生时间。|
    |**保存PDF**|如果您需要将页面保存到本地，请单击**保存PDF**，耐心等待PDF文件生成。|

    ![](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/0213729951/p34731.png)

-   实时TOP Objects-平均开销：从平均CPU开销、平均执行耗时、平均逻辑读和平均返回行四个方面查看实例中的TOP Objects。详细参数说明如下。

    |参数|说明|
    |--|--|
    |**平均CPU开销**|数据库对象平均每次执行CPU开销，单位为毫秒。|
    |**平均执行耗时**|数据库对象平均每次执行耗时，单位为毫秒。|
    |**平均逻辑读**|数据库对象平均每次执行的逻辑读消耗。|
    |**平均返回行**|数据库对象平均每次执行返回的行数。|

    ![](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/0213729951/p34732.png)

-   实时TOP Objects-总开销：从总CPU开销占比、总执行时间占比、总逻辑IO占比和总返回行占比四个方面查看实例中的TOP Objects。详细参数说明如下。

    |参数|说明|
    |--|--|
    |**总CPU开销占比**|数据库对象总CPU消耗的占比情况。|
    |**总执行时间占比**|数据库对象总执行时间占比情况。|
    |**总逻辑IO占比**|数据库对象总逻辑IO占比情况。|
    |**总返回行占比**|数据库对象总返回行数占比情况。|

    ![](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/0213729951/p34733.png)

-   实时TOP Objects-列表
    -   TOP Objects列表总览：实时展示实例的数据库中对象级别的性能消耗总览。详细参数说明如下。

        |参数|说明|
        |--|--|
        |**对象名**|数据库对象名称，包含数据库名、架构名和对象名。|
        |**对象类型**|数据库对象类型，包含存储过程、函数、触发器等。|
        |**总执行次数**|重启实例或清理缓存后数据库对象总的执行次数。|
        |**总CPU开销**|重启实例或清理缓存后数据库对象总的CPU开销，单位为毫秒。|
        |**平均CPU开销**|数据库对象平均每次执行的CPU开销，单位为毫秒。|
        |**总执行耗时**|重启实例或清理缓存后数据库对象总的执行时间开销，单位为毫秒。|
        |**平均执行耗时**|数据库对象平均每次执行时间开销，单位为毫秒。|
        |**总返回行**|重启实例或清理缓存后数据库对象总的返回行数。|
        |**平均返回行**|数据库对象平均每次执行返回行数。|
        |**总逻辑读**|重启实例或清理缓存后数据库对象总的逻辑读。|
        |**平均逻辑读**|数据库对象平均每次执行的逻辑读。|
        |**总物理读**|重启实例或清理缓存后数据库对象总的物理读。|
        |**平均物理读**|数据库对象平均每次执行的物理读。|
        |**总逻辑写**|重启实例或清理缓存后数据库对象总的逻辑写入。|
        |**平均逻辑写**|数据库对象平均每次执行的逻辑写入。|
        |**总逻辑IO**|重启实例或清理缓存后数据库对象总的逻辑IO消耗。|
        |**平均逻辑IO**|数据库对象平均每次执行的逻辑IO消耗。|

        ![](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/0213729951/p34734.png)

    -   TOP Objects列表详情：若需要查看某一个具体数据库对象中每个步骤的性能消耗，可以点击左边的➕号按钮，来查看数据库对象中SQL语句级别的详细性能消耗。详细参数说明如下。

        |参数|说明|
        |--|--|
        |**对象名**|该SQL语句所属的数据库对象名称，包含数据库名、架构名和对象名。|
        |**Statement\(点击详情\)**|该SQL语句详情，可以点击查看完整SQL语句。|
        |**执行次数**|该SQL语句执行总次数。|
        |**获取执行计划**|该SQL语句执行计划获取的次数。|
        |**总CPU耗时**|该SQL语句总CPU耗时，单位为毫秒。|
        |**平均CPU耗时**|该SQL语句平均每次执行的CPU耗时，单位为毫秒。|
        |**最小CPU耗时**|该SQL语句执行最小CPU耗时，单位为毫秒。|
        |**最大CPU耗时**|该SQL语句执行最大CPU耗时，单位为毫秒。|
        |**最后CPU耗时**|该SQL语句最后一次执行CPU耗时，单位为毫秒。|
        |**总执行耗时**|该SQL语句总执行耗时，单位为毫秒。|
        |**平均执行耗时**|该SQL语句平均每次执行耗时，单位为毫秒。|
        |**最小执行耗时**|该SQL语句执行最小耗时，单位为毫秒。|
        |**最大执行耗时**|该SQL语句执行最大耗时，单位为毫秒。|
        |**最后执行耗时**|该SQL语句最后一次执行耗时，单位为毫秒。|
        |**总返回行**|该SQL语句执行总的返回行数。|
        |**平均返回行**|该SQL语句平均每次执行返回行数。|
        |**最小返回行**|该SQL语句执行返回行数最小值。|
        |**最大返回行**|该SQL语句执行返回行数最大值。|
        |**最后返回行**|该SQL语句最后一次执行返回行数。|
        |**总逻辑读**|该SQL语句执行总的逻辑读。|
        |**平均逻辑读**|该SQL语句平均每次执行逻辑读。|
        |**最小逻辑读**|该SQL语句执行最小逻辑读。|
        |**最大逻辑读**|该SQL语句执行最大逻辑读。|
        |**最后逻辑读**|该SQL语句最后一次执行逻辑读。|
        |**总物理读**|该SQL语句总的物理读。|
        |**平均物理读**|该SQL语句平均每次执行的物理读。|
        |**最小物理读**|该SQL语句执行最小的物理读。|
        |**最大物理读**|该SQL语句执行最大的物理读。|
        |**最后物理读**|该SQL语句最后一次执行物理读。|
        |**总逻辑写**|该SQL语句执行总的逻辑写。|
        |**平均逻辑写**|该SQL语句平均每次执行的逻辑写。|
        |**最小逻辑写**|该SQL语句执行最小的逻辑写。|
        |**最大逻辑写**|该SQL语句执行最大的逻辑写。|
        |**最后逻辑写**|该SQL语句执行总的逻辑写。|
        |**总逻辑IO**|该SQL语句执行总的逻辑IO。|
        |**平均逻辑IO**|该SQL语句平均每次执行的逻辑IO。|
        |**最小逻辑IO**|该SQL语句执行最小的逻辑IO。|
        |**最大逻辑IO**|该SQL语句执行最大的逻辑IO。|
        |**最后逻辑IO**|该SQL语句最后一次执行的逻辑IO。|
        |**最后执行时间**|该SQL语句最后一次执行时间。|

        ![](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/0213729951/p34735.png)


