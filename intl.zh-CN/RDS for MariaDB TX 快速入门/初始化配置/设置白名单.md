# 设置白名单 {#concept_pdr_k2f_vdb .concept}

创建RDS实例后，您需要设置RDS实例的白名单，以允许外部设备访问该RDS实例。默认的白名单只包含默认IP地址127.0.0.1，表示任何设备均无法访问该RDS实例。

设置白名单包括两种操作：

-   设置IP名单：添加IP地址，使这些IP地址可以访问该RDS实例。
-   设置ECS安全组：添加ECS安全组，使ECS安全组内的ECS实例可以访问该RDS实例。

白名单可以让RDS实例得到高级别的访问安全保护，建议您定期维护白名单。设置白名单不会影响RDS实例的正常运行。

## 设置IP白名单 {#section_wyv_ws4_ydb .section}

**注意事项**

-   默认的IP白名单分组只能被修改或清空，不能被删除。
-   设置白名单之前，您需要确认实例处于哪种**网络隔离模式**，根据模式查看相应的操作步骤。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7816/155358150035435_zh-CN.png)

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7816/155358150035436_zh-CN.png)

    **说明：** RDS for MariaDB实例所处的内网只支持**专有网络**。


**高安全白名单模式操作步骤**

1.  登录[RDS管理控制台](https://rds.console.aliyun.com/)。
2.  在页面左上角，选择实例所在地域。

    ![选择地域](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7814/155358150036543_zh-CN.png)

3.  找到目标实例，单击实例ID。
4.  在左侧导航栏中选择**数据安全性**。
5.  在白名单设置页面中，根据以下连接类型进行后续操作。

    -   专有网络下的ECS实例连接到RDS实例：单击default 专有网络分组右侧的**修改**。
    -   经典网络下的ECS实例连接到RDS实例：由于MariaDB实例不支持经典网络，您可以为ECS实例申请公网地址，并参考下面**外网的实例或主机连接到RDS实例**。
    -   外网的实例或主机连接到RDS实例：单击default 经典网络分组右侧的**修改**。
    **说明：** 

    -   若需要ECS实例通过专有网络地址连接到RDS，请确保两者处于同一地域内，且[网络类型](../intl.zh-CN/用户指南/数据库连接/切换网络类型.md#)相同，否则设置了白名单也无法连接成功。
    -   您也可以单击**添加白名单分组**新建自定义分组，根据连接类型选择**专有网络**或**经典网络 及 外网地址**。
    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7816/155358150035445_zh-CN.png)

6.  在弹出的对话框中，填写需要访问该实例的IP地址或IP段，然后单击**确定**。

    -   若填写IP段，如10.10.10.0/24，则表示10.10.10.X的IP地址都可以访问该RDS实例。
    -   若您需要添加多个IP地址或IP段，请用英文逗号隔开（逗号前后都不能有空格），例如192.168.0.1,172.16.213.9。
    -   单击**加载ECS内网IP**后，将显示您当前阿里云账号下所有ECS实例的IP地址，可快速添加ECS内网IP地址到白名单中。
    **说明：** 当您在**default**分组中添加新的IP地址或IP段后，默认地址127.0.0.1会被自动删除。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7816/15535815011795_zh-CN.png)


**通用白名单模式操作步骤**

1.  登录[RDS管理控制台](https://rds.console.aliyun.com/)。
2.  在页面左上角，选择实例所在地域。

    ![选择地域](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7814/155358150036543_zh-CN.png)

3.  找到目标实例，单击实例ID。
4.  在左侧导航栏中选择**数据安全性**。
5.  在白名单设置页面中，单击**default**白名单分组中的**修改**，如下图所示。

    **说明：** 您也可以单击**添加白名单分组**新建自定义分组。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7816/15535815011794_zh-CN.png)

6.  在修改白名单分组对话框中，填写需要访问该实例的IP地址或 IP 段，然后单击**确定**。

    -   若填写IP段，如10.10.10.0/24，则表示10.10.10.X的IP地址都可以访问该RDS实例。
    -   若您需要添加多个IP地址或IP段，请用英文逗号隔开（逗号前后都不能有空格），例如192.168.0.1,172.16.213.9。
    -   单击**加载ECS内网IP**后，将显示您当前阿里云账号下所有ECS实例的IP地址，可快速添加ECS内网IP地址到白名单中。
    **说明：** 当您在**default**分组中添加新的IP地址或IP段后，默认地址127.0.0.1会被自动删除。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7816/15535815011795_zh-CN.png)


**常见错误案例**

-   由于**数据安全性 \> 白名单设置**中只有默认地址127.0.0.1。该地址表示不允许任何设备访问RDS实例。因此需在白名单中添加对端的IP地址。
-   白名单设置成了0.0.0.0，正确格式为0.0.0.0/0。

    **说明：** 0.0.0.0/0表示允许任何设备访问RDS实例，请谨慎使用。

-   如果开启了[高安全白名单模式](../intl.zh-CN/用户指南/数据安全性/切换为高安全白名单模式.md#)，需进行如下检查：
    -   如果使用的是专有网络的内网连接地址，请确保ECS内网IP地址添加到了专有网络的分组。
    -   如果使用[ClassicLink](https://help.aliyun.com/document_detail/65412.html)访问RDS的专有网络地址，请确保ECS内网IP地址添加到了**default 专有网络**分组。
    -   如果通过公网连接，请确保设备公网IP地址添加到了经典网络的分组（专有网络的分组不适用于公网）。
-   您在白名单中添加的设备公网IP地址可能并非设备真正的出口IP地址。原因如下：

    -   公网IP地址不固定，可能会变动。

    -   IP地址查询工具或网站查询的公网IP地址不准确。

    解决办法请参见[RDS for MySQL或MariaDB TX如何定位本地公网IP地址](../intl.zh-CN/常见问题/网络__IP/RDS for MySQL或MariaDB TX如何定位本地公网IP地址.md#)。


## 设置ECS安全组 {#section_dsr_nt4_ydb .section}

ECS安全组是一种虚拟防火墙，用于控制安全组中的ECS实例的出入流量。在RDS白名单中添加ECS安全组后，该安全组中的ECS实例就可以访问RDS实例。

关于ECS安全组的更多信息，请参见[创建安全组](https://www.alibabacloud.com/help/doc-detail/25468.htm?spm=a2c63.p38356.a3.2.42187afeEXhLP9)。

**注意事项**

-   支持ECS安全组的地域：杭州、青岛、香港。
-   您可以同时设置IP白名单和ECS安全组。IP白名单中的IP地址和安全组中的ECS实例都可以访问该RDS实例。
-   目前仅支持添加一个ECS安全组。
-   白名单中的ECS安全组的更新将实时应用到白名单。

**操作步骤**

1.  登录[RDS管理控制台](https://rds.console.aliyun.com/)。
2.  在页面左上角，选择实例所在地域。

    ![选择地域](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7814/155358150036543_zh-CN.png)

3.  找到目标实例，单击实例ID。
4.  在左侧导航栏中，选择**数据安全性**。
5.  单击**添加安全组**。
6.  选中要添加的安全组，单击**确定**。

    **说明：** 带有VPC标识的ECS安全组为专有网络中的安全组。


## 相关API {#section_hcn_555_jgb .section}

|API|描述|
|---|--|
|[DescribeDBInstanceIPArrayList](../intl.zh-CN/API参考/安全管理/DescribeDBInstanceIPArrayList.md#)|查看RDS实例IP白名单|
|[ModifySecurityIps](../intl.zh-CN/API参考/安全管理/ModifySecurityIps.md#)|修改RDS实例IP白名单|

