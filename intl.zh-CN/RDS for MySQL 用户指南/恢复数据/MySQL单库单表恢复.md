# MySQL单库单表恢复 {#concept_ocr_swk_ngb .concept}

RDS for MySQL支持单库和单表的数据恢复，可以通过备份指定恢复误删的数据库或表，快速恢复MySQL的数据。

## 前提条件 {#section_o5q_1p4_ydb .section}

-   实例为如下版本：
    -   MySQL 5.6 高可用版
    -   MySQL 5.7 高可用版（本地SSD盘）
-   控制台**备份恢复** \> **备份设置**里开启单库单表恢复功能。

    ![控制台开通库表恢复](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/115355/156680789544546_zh-CN.png)

    **注意：** 

    -   开通单库单表恢复功能后，备份格式会修改，用于支持库表恢复，且开通之后无法关闭该功能。
    -   新实例默认开启该功能，无法关闭。
-   如果是恢复到原实例，原实例需要满足如下条件：
    -   运行中且没有被锁定。
    -   当前没有迁移任务。
    -   如果要按时间点进行恢复，需要确保日志备份已开启。
    -   若要按备份集恢复，则原实例必须至少有一个备份集。
-   如果是恢复到新实例，原实例需要满足如下条件：
    -   运行中且没有被锁定。
    -   如果要按时间点进行恢复，需要确保日志备份已开启。
    -   若要按备份集恢复，则原实例必须至少有一个备份集。

## 注意事项 {#section_slr_ynq_ngb .section}

-   单库单表恢复功能会将备份文件从tar压缩包变成xbstream文件包，备份文件占用的存储空间会略微增大，请您关注[备份使用量](../../../../intl.zh-CN/用户指南/备份数据/查看备份空间免费额度.md#)。超出免费备份空间额度的部分将会产生额外费用，请合理设计备份周期，以满足业务需求的同时，兼顾备份空间的合理利用。
-   实例内的表低于50000张才可以使用单库单表恢复功能，超过50000张表时无法使用。
-   每次最多选择50个库或者表。

## 操作步骤 {#section_m3j_zlb_3gb .section}

1.  登录[RDS管理控制台](https://rds.console.aliyun.com/)。
2.  选择实例所在地域。
3.  单击实例的ID。
4.  在左侧导航栏中，选择备份恢复。
5.  在页面右上角，单击**数据库 库/表级别恢复**，在弹出的对话框中设置以下参数。

    **说明：** 如未看到**数据库 库/表级别恢复**按钮，请参见[前提条件](#)。

    ![库/表级别恢复](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/115355/156680789637783_zh-CN.png)

    ![库/表级别恢复参数设置1](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/115355/156680789637784_zh-CN.png)

    |参数名称|说明|
    |----|--|
    |**回档位置**|     -   **回档到原实例**：将库/表恢复到原实例中。
    -   **回档到新实例**：新购实例，并将库/表恢复到新实例中。
 |
    |**还原方式**|     -   **按备份集**
    -   **按时间点**：可以设置为日志备份保留时间内的任意时间点。如要查看或修改日志备份保留时间，请参见[备份RDS数据](../../../../intl.zh-CN/用户指南/备份数据/备份RDS数据.md#)。
 **说明：** 只有开启了日志备份，才会显示**按时间点**。

 |
    |**备份集**|选择备份集来进行库/表恢复。 **说明：** **还原方式**选择**按备份集**时可用。

 |
    |**还原时间**|选择时间点来进行库/表恢复。 **说明：** **还原方式**选择**按时间点**时可用。

 |
    |**需要恢复的库和表**|勾选需要恢复的库或表。|
    |**已选择的库和表**|     -   显示已勾选的库和表，并可预设恢复后的库/表名称。
    -   显示已勾选的库和表的总大小，以及该实例剩余存储空间，请关注剩余存储空间是否足够。
 |

6.  单击**确定**。

    **说明：** 若**回档位置**选择的是**回档到新实例**，会跳转到实例购买页面，设置新实例的参数并完成支付即可。

    ![库/表级别恢复新建实例](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/115355/156680789637786_zh-CN.png)

    |参数名称|说明|
    |----|--|
    |**系列**|     -   基础版：单节点，计算与存储分离，性价比高，但不建议用于生产环境。
    -   高可用版：一个主节点和一个备节点，经典高可用架构。
 关于各个系列的详细介绍，请参见 [产品系列概述](../../../../intl.zh-CN/云数据库RDS简介/产品系列/产品系列概述.md)。 不同数据库版本支持的系列不同，请以实际界面为准。

 |
    |**可用区**| 可用区是地域中的一个独立物理区域，不同可用区之间没有实质性区别。

 您可以选择将RDS实例与ECS实例创建在同一可用区或不同的可用区。 **说明：** 新实例的地域与原实例相同，不支持修改。

 |
    |**规格**| 每种规格都有对应的CPU核数、内存、最大连接数和最大IOPS。具体请参见[实例规格表](../../../../intl.zh-CN/云数据库RDS简介/实例规格/实例规格表.md)。

 RDS实例有以下规格族：

    -   通用型：独享被分配的内存和I/O资源，与同一服务器上的其他通用型实例共享CPU和存储资源。
    -   独享型：独享被分配的CPU、内存、存储和I/O资源。
    -   独占物理机型：是独享型的顶配，独占整台服务器的CPU、内存、存储和I/O资源。
 例如， **8核32GB**是通用型实例规格， **8核32GB（独享套餐）**是独享型实例规格， **30核220GB（独占主机）**是独占物理机型实例规格。|
    |**存储空间**|该存储空间包括数据空间、系统文件空间、Binlog文件空间和事务文件空间。|
    |**网络类型**|     -   **经典网络**：传统的网络类型。
    -   **专有网络**（推荐）：也称为VPC（Virtual Private Cloud）。VPC是一种隔离的网络环境，安全性和性能均高于传统的经典网络。
 |


## 相关API {#section_3lc_5m8_tio .section}

|API|描述|
|---|--|
|[RestoreTable](../../../../intl.zh-CN/API参考/备份恢复/RestoreTable.md#)|恢复RDS实例的某个数据库或表到原实例上。|
|[CloneDBInstance](../../../../intl.zh-CN/API参考/备份恢复/CloneDBInstance.md#)|恢复RDS实例的某个数据库或表到新实例上。|

