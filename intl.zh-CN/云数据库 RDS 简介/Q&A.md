# Q&A

本文汇总了使用云数据库RDS时的常见问题，包含基本概念、计费购买、实例管理等方面。

-   基本概念问题
    -   [什么是数据库实例？](#section_ffn_rnj_6re)
    -   [什么是主实例、备实例？](#section_cjg_u2w_f3j)
    -   [什么是只读实例？](#section_f1r_e8w_hat)
-   计费和购买问题
    -   [我的实例是包年包月的，为什么还有其他收费？](#section_ok7_0wt_4zq)
    -   [为什么创建实例后无反应，实例列表也看不到创建中的实例？](#section_5e4_m6z_1aq)
    -   [按量付费实例不使用也会收费吗？](#section_2bj_use_4pb)
    -   [包年包月和按量付费可以互相转换吗？](#section_ojs_eo0_brc)
    -   [包年包月实例变更配置如何收费？](#section_wdv_jkm_e65)
    -   [实例到期或者欠费有什么影响？](#section_vr8_ewz_pso)
    -   [按量付费和包年包月实例的公网流量都免费吗？出流量和入流量都免费吗？](#section_qn5_9eq_3xh)
    -   [申请外网地址收费吗？](#section_n8a_lv5_mqc)
    -   [为什么相同CPU和内存时，入门级规格的最大连接数和IOPS都比企业级规格高？](#section_z4r_eqe_ui8)
-   实例管理问题
    -   [如何授权子账号管理RDS实例？](#section_a01_3be_76g)
    -   [存储类型（本地SSD盘、SSD云盘和ESSD云盘）如何变更？](#section_fee_nog_yo5)
    -   [扩容存储空间需要多久？](#section_kew_v07_i2i)
    -   [升级主实例配置时，只读实例的配置是否会自动升级？](#section_k18_jdc_lxy)
    -   [变更配置时，是否会影响线上业务？](#section_ch3_nzp_v6n)
    -   [变更配置后，实例的地址会变化吗？](#section_76z_1fv_qb1)
    -   [如何变更专有网络VPC？](#section_cli_kcd_v6p)
    -   [备实例可以访问吗？](#section_1ha_ug8_hg0)
    -   [使用专有网络时，RDS MySQL实例会占用几个私有IP？](#section_75r_gs0_260)
    -   [升级存储空间，一直显示库存不足，怎么办？](#section_z79_t1x_fkn)
-   安全问题
    -   [设置IP白名单后立刻生效吗？](#section_d5m_4qb_mhg)
    -   [为什么多了几个陌生的白名单分组？](#section_93e_g99_sk5)
    -   [不开放外网访问，仅在内网访问，会有安全风险吗？](#section_rm7_kcn_rpy)
    -   [SSL证书到期后不更新会有什么影响？会影响实例运行或数据安全吗？](#section_29n_w8a_esi)
-   审计问题

    [开通SQL洞察后，如何确认SQL洞察生成的日志大小？](#section_ycn_97y_thi)

-   连接问题
    -   [解决无法连接实例问题](/intl.zh-CN/常见问题/连接/网络/解决无法连接RDS实例的问题.md)
    -   [外网能访问专有网络内的实例吗？](#section_4u1_mdw_fn5)
    -   [主备切换会影响连接地址吗？](#section_fll_r2e_ox9)
-   账号和数据库问题
    -   [账号可以实现更细粒度的管理吗（限制源地址、访问表等）？](#section_op9_gkr_rel)
    -   [高权限账号和普通账号具体有哪些权限？](#section_eep_5jp_tiw)
    -   [RDS提供root账号或super权限吗？](#section_x6k_n67_z67)
    -   [主实例上创建的账号在只读实例上可以用吗？](#section_va9_n55_v73)
-   只读实例和读写分离问题
    -   [升级主实例配置时，只读实例的配置是否会自动升级？](#section_gyf_7a2_b01)
    -   [只读实例的读权重设置为0后，还可以访问它吗？](#section_4jv_8uf_52j)
    -   [释放只读实例会影响业务吗？](#section_6jn_1pu_iy2)
    -   [使用读写分离出现问题怎么办？](#section_aph_ldz_afl)
    -   [主实例写的频率不高，能不能让读请求也发送给主实例？](#section_p6a_v2e_7bz)
-   备份和恢复问题
    -   [MySQL的数据备份是否可以关闭？](#section_bbb_307_bll)
    -   [MySQL的日志备份是否可以关闭？](#section_qj5_nuz_bsy)
    -   [为什么有时候备份任务会失败？](#section_hzn_nb6_bxe)
    -   [日志备份内，同一个Binlog文件名为什么存在两份？](#section_zea_7jn_0sz)
    -   [下载后的数据备份和日志备份有什么用？](#section_zgt_8ui_0ce)
    -   [为什么数据很少，但是快照备份很大（例如数据只有几个G，快照备份几十G）？](#section_8eq_hkf_l5b)
    -   [如何快速方便的查询备份文件中的数据？](#section_isx_3uq_58s)

## 什么是数据库实例？

一个数据库实例（Database Instance）就是一个数据库服务器（Database Server），其中可以建一个或多个数据库（Database），每个数据库中可以建一个或多个表。

## 什么是主实例、备实例？

对于高可用版、集群版、三节点企业版实例，对您业务访问的节点称为主实例，同时主实例数据会实时同步到另一个节点（称为备实例）。

您只能访问主实例，备实例仅作为备份形式存在，不提供业务访问。当主实例故障时，会进行主备切换，即备实例切换为主实例，主实例切换为备实例并进行重搭修复，整个切换过程对应用而言是无感知的，仅在切换时可能会出现闪断。

各系列的主备情况请参见[产品系列概述](/intl.zh-CN/云数据库 RDS 简介/产品系列/产品系列概述.md)。

## 什么是只读实例？

只读实例是为了实现读取能力的弹性扩展，分担数据库压力。在对数据库有少量写请求，但有大量读请求的应用场景下，单个实例可能无法承受读取压力，甚至对业务产生影响。此种情况下可创建一个或多个只读实例，利用只读实例满足大量的数据库读取需求，增加应用的吞吐量。

详情请参见[MySQL只读实例简介](/intl.zh-CN/RDS MySQL 数据库/只读实例/MySQL只读实例简介.md)。

## 我的实例是包年包月的，为什么还有其他收费？

包年包月的费用仅包括实例和存储空间费用，如果使用了只读实例、SQ洞察、收费性能监控，或备份空间过大，都会产生额外费用，详情请参见[收费项](/intl.zh-CN/云数据库 RDS 价格/价格、收费项与计费方式.md)。

## 为什么创建实例后无反应，实例列表也看不到创建中的实例？

看不到创建中的实例可能有如下两个原因：

-   地域错误

    可能您所在地域和您创建实例时选择的地域不一致。您可以在页面左上角切换地域。

    ![选择地域](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/3074469951/p36543.png)

-   可用区内资源不足

    由于可用区资源是动态分配的，可能您下单后可用区内资源不足，所以会创建失败，建议您更换可用区重试。创建失败您可以在[订单列表](https://billing.console.aliyun.com/?#/order/list/)里看到退款。


## 按量付费实例不使用也会收费吗？

按量付费实例即使不使用，也会一直占用计算和存储资源，所以仍然会每小时收取费用。如果长期不使用，建议您保存数据后释放实例。

## 包年包月和按量付费可以互相转换吗？

可以互相转换。详情请参见[按量付费转包年包月](/intl.zh-CN/RDS MySQL 数据库/变更实例/按量付费转包年包月.md)和[包年包月转按量付费](/intl.zh-CN/RDS MySQL 数据库/变更实例/包年包月转按量付费.md)。

## 包年包月实例变更配置如何收费？

详情请参见[变配](/intl.zh-CN/云数据库 RDS 价格/变配.md)。

## 实例到期或者欠费有什么影响？

详情请参见[到期或欠费](/intl.zh-CN/云数据库 RDS 价格/到期或欠费.md)。

## 按量付费和包年包月实例的公网流量都免费吗？出流量和入流量都免费吗？

按量付费和包年包月实例的公网流量都是免费的，包括出流量和入流量。

## 申请外网地址收费吗？

申请外网地址暂不收费。

## 为什么相同CPU和内存时，入门级规格的最大连接数和IOPS都比企业级规格高？

这是因为入门级规格属于共享/通用型规格族，企业级规格属于独享型规格族。实际使用中企业级规格由于独享CPU和内存，会更加稳定。详细区别请参见[规格族](/intl.zh-CN/云数据库 RDS 简介/产品规格/实例规格族.md)。

## 如何授权子账号管理RDS实例？

请参见[云数据库 RDS 授权](https://www.alibabacloud.com/help/zh/doc-detail/58932.htm)。

## 存储类型（本地SSD盘、SSD云盘和ESSD云盘）如何变更？

请参见[云盘如何变更为本地盘](/intl.zh-CN/常见问题/购买/付费/云盘如何变更为本地盘.md)。

## 扩容存储空间需要多久？

系统检查实例所在主机上是否有足够存储空间用于扩容。如果有则直接扩容，不需要迁移数据，此种情况花费时间很短；如果没有，系统会迁移数据到拥有足够存储空间的主机上，此种情况花费时间较长。

## 升级主实例配置时，只读实例的配置是否会自动升级？

只读实例不会自动升级，需要您手动升级。

## 变更配置时，是否会影响线上业务？

在升级过程中，仅在切换时会发生30秒闪断。

## 变更配置后，实例的地址会变化吗？

[内网/外网地址](/intl.zh-CN/RDS MySQL 数据库/数据库连接/查看或修改内外网地址和端口.md)和[读写分离地址](/intl.zh-CN/RDS MySQL 数据库/数据库代理（读写分离）/共享代理（下线中）/开通读写分离（共享代理）.md)不会改变，但是对应的IP地址可能会变化。建议您在应用程序中使用内网/外网地址或读写分离地址。

## 如何变更专有网络VPC？

-   部分MySQL实例支持直接变更VPC和交换机。详情请参见[切换专有网络VPC和虚拟交换机](/intl.zh-CN/RDS MySQL 数据库/数据库连接/切换专有网络VPC和虚拟交换机.md)。
-   对于支持从VPC切换到经典网络，以及支持从经典网络切换到VPC的实例：
    1.  将网络模式从VPC切换为经典网络。
    2.  将网络模式从经典网络切换至目的VPC。
-   对于不支持网络类型切换的实例：

    购买新的实例（购买时选择目的VPC），然后将数据迁移到新的实例。详情请参见[MySQL实例间数据迁移](/intl.zh-CN/RDS MySQL 数据库/数据迁移/RDS实例间数据迁移.md)。


## 备实例可以访问吗？

不可以访问。您只能访问主实例，备实例仅作为备份形式存在，不提供业务访问。

## 使用专有网络时，RDS MySQL实例会占用几个私有IP？

答：由于底层实现的原因，不同类型实例占用的私有IP数量不同，详情如下：

-   RDS MySQL 5.5、5.6、5.7、8.0高可用版（本地SSD盘）：1个
-   RDS MySQL 5.6、5.7、8.0三节点企业版（本地SSD盘）：1个
-   RDS MySQL 5.7基础版（SSD云盘）：1个
-   RDS MySQL 8.0基础版（SSD云盘）：2个
-   RDS MySQL 5.7、8.0高可用版（云盘）：3个
-   RDS MySQL 5.7、8.0三节点企业版（云盘）：1个

## 升级存储空间，一直显示库存不足，怎么办？

您可以[迁移可用区](/intl.zh-CN/RDS MySQL 数据库/变更实例/迁移可用区.md)后再升级存储空间。迁移可用区不会改变连接地址，但是地址对应的IP会改变，建议应用程序设置自动重连。

## 设置IP白名单后立刻生效吗？

设置白名单后需要等待1分钟左右才会生效。

## 为什么多了几个陌生的白名单分组？

如果多的分组内IP是内网IP，通常是阿里云其他产品（例如DMS、DAS）自动生成的辅助控制台某些功能的白名单，无需做任何处理，不会影响您的任何数据。

![hdm白名单](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/4477559951/p68936.png)

## 不开放外网访问，仅在内网访问，会有安全风险吗？

建议您将RDS实例[切换为专有网络](/intl.zh-CN/RDS MySQL 数据库/数据库连接/切换网络类型.md)，这样只有将相同VPC内的ECS实例内网IP添加到RDS实例白名单内，该ECS实例才能访问RDS实例。

## SSL证书到期后不更新会有什么影响？会影响实例运行或数据安全吗？

SSL证书到期后不更新，仅会导致使用加密连接的客户端程序无法正常连接实例，不会影响实例运行或数据安全。

## 开通SQL洞察后，如何确认SQL洞察生成的日志大小？

答：您可以在**基本信息**页面的**使用量统计**区域查看实例的SQL洞察日志大小。

![SQL洞察日志大小](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/8223729951/p67321.png)

## 外网能访问专有网络内的实例吗？

如果您已经[设置白名单](/intl.zh-CN/RDS MySQL 数据库/快速入门/设置白名单.md)，专有网络和经典网络内的实例都能从外网访问。

## 主备切换会影响连接地址吗？

主备切换不会导致连接地址变更，仅后台对应的IP地址会变化，不会对您的应用正常运行造成影响。

## 账号可以实现更细粒度的管理吗（限制源地址、访问表等）？

您可以[连接数据库](/intl.zh-CN/RDS MySQL 数据库/快速入门/连接MySQL实例.md)后使用命令进行更细粒度的授权。

## 高权限账号和普通账号具体有哪些权限？

详情请参见[账号权限列表](/intl.zh-CN/RDS MySQL 数据库/快速入门/创建数据库和账号.md)。

## RDS提供root账号或super权限吗？

RDS不提供root账号或具有super权限的账号，避免您误操作导致数据丢失泄露等无法挽回的损失。

## 主实例上创建的账号在只读实例上可以用吗？

主实例创建的账号会同步到只读实例，只读实例无法管理账号。账号在只读实例上只能进行读操作，不能进行写操作。

## 升级主实例配置时，只读实例的配置是否会自动升级？

只读实例不会自动升级，需要您手动[变更配置](/intl.zh-CN/RDS MySQL 数据库/变更实例/变更配置.md)。

## 只读实例的读权重设置为0后，还可以访问它吗？

通过读写分离地址无法访问读权重为0的只读实例，只能使用只读实例的[内网/外网地址](/intl.zh-CN/RDS MySQL 数据库/数据库连接/查看或修改内外网地址和端口.md)进行访问。通常这种需求是为了将某个只读实例仅提供给某个业务使用。

## 释放只读实例会影响业务吗？

会影响业务，建议您先将要释放的只读实例的[读权重](/intl.zh-CN/RDS MySQL 数据库/数据库代理（读写分离）/共享代理（下线中）/修改延迟阈值和读权重分配.md)设置为0，然后再释放实例。 之前缓存的连接还是会连接到该只读实例，需要重新建立连接才会路由到其他只读实例。

## 使用读写分离出现问题怎么办？

详情请参见[读写分离常见问题](/intl.zh-CN/RDS MySQL 数据库/数据库代理（读写分离）/共享代理（下线中）/读写分离常见问题.md)。

## 主实例写的频率不高，能不能让读请求也发送给主实例？

设置[读权重](/intl.zh-CN/RDS MySQL 数据库/数据库代理（读写分离）/读写分离.md)时，为主实例也设置权重即可。

## MySQL的数据备份是否可以关闭？

不可以关闭。可以减少备份频率，一周至少2次。数据备份保留天数最少7天。

## MySQL的日志备份是否可以关闭？

可以关闭（基础版除外）。备份设置内关闭日志备份开关即可。

## 为什么有时候备份任务会失败？

备份过程中执行DDL操作，会导致锁表，从而导致备份失败。

## 日志备份内，同一个Binlog文件名为什么存在两份？

答：高可用系列是一主一备架构，主备实例都会生成Binlog文件，通过**BINLOG所在实例编号**进行区分。在服务可用性页面可以查看主备实例的编号。

![实例编号](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/1213729951/p38570.png)

## 下载后的数据备份和日志备份有什么用？

答：您可以使用这些备份文件随时恢复数据，请参见[RDS MySQL物理备份文件恢复到自建数据库](/intl.zh-CN/RDS MySQL 数据库/恢复/RDS MySQL物理备份文件恢复到自建数据库.md)或[RDS MySQL逻辑备份文件恢复到自建数据库](/intl.zh-CN/RDS MySQL 数据库/恢复/RDS MySQL逻辑备份文件恢复到自建数据库.md)。

## 为什么数据很少，但是快照备份很大（例如数据只有几个G，快照备份几十G）？

答：创建快照的过程中，系统通过消除空块的操作，使得单个快照容量小于磁盘容量。单个块的大小为2 M，如果写入时比较分散，就会导致大量的块没有写满，例如3 M的数据可能会占用2个块、3个块甚至4个块，在计算快照备份大小时，会计算所有非空块的大小，因此会出现快照备份占用空间远大于数据本身占用空间。

## 如何快速方便的查询备份文件中的数据？

对于全量逻辑备份文件，通过数据库备份DBS的[备份集查询]()功能，可以在不恢复备份数据的情况下，直接查询云存储中备份集的数据。

